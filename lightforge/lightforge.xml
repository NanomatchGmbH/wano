<WaNoTemplate>
  <WaNoRoot name="lightforge">
    <WaNoTabs name="TABS">
      
      <WaNoGroup name="general">

        <WaNoDropDown name="settings">
          <Entry id="0">basic</Entry>
          <Entry id="1">advanced</Entry>
        </WaNoDropDown>

        <WaNoDropDown name="device_layout">
          <Entry id="0">stack</Entry>
          <Entry id="1">manual</Entry>
        </WaNoDropDown>

        <WaNoDropDown name="morphology_type">
          <Entry id="0" chosen="True">layer_defined</Entry>
          <Entry id="1">file</Entry>
          <Entry id="2">stochastic_extension</Entry>
        </WaNoDropDown>

        <WaNoBool name="connect_electrodes">True</WaNoBool>

        <WaNoDictBox name="PBC">
          <WaNoBool visibility_condition="%s == False" visibility_var_path="TABS.general.connect_electrodes" name="x">False</WaNoBool>
          <WaNoBool name="y">True</WaNoBool>
          <WaNoBool name="z">True</WaNoBool>
        </WaNoDictBox> 

        <WaNoFile visibility_condition="'%s' == 'file'" visibility_var_path="TABS.general.morphology_type" logical_filename="COM_all.dat" name="morphology_file">Put file here</WaNoFile>

        <WaNoDictBox visibility_condition="'%s' == 'file'" visibility_var_path="TABS.general.morphology_type" name="device_dimensions">
          <WaNoFloat name="Lx">10</WaNoFloat>
          <WaNoFloat name="Ly">10</WaNoFloat>
          <WaNoFloat name="Lz">10</WaNoFloat>
        </WaNoDictBox>         

      </WaNoGroup>

      <WaNoGroup name="physics">

        <WaNoDictBox name="particle_types">
          <WaNoBool name="holes">True</WaNoBool>
          <WaNoBool name="electrons">False</WaNoBool>
          <WaNoBool name="excitons">False</WaNoBool>
        </WaNoDictBox> 

        <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.excitons" name="exciton_settings">
          <WaNoDropDown name="transport_rates">
            <Entry id="0" chosen="True">heuristic</Entry>
            <Entry id="1">microsopic</Entry>
          </WaNoDropDown>
          <WaNoFloat name="radiative_decay">1e12</WaNoFloat>
          <WaNoFloat name="thermal_decay">1e6</WaNoFloat>
        </WaNoDictBox>      

        <WaNoFloat visibility_condition="'%s' == 'advanced'" visibility_var_path="TABS.general.settings" name="epsilon_material">4.0</WaNoFloat>

        <WaNoDropDown visibility_condition="'%s' == 'advanced'" visibility_var_path="TABS.general.settings" name="rates">
          <Entry id="0" chosen="True">Marcus</Entry>
          <Entry id="1">Miller</Entry>
        </WaNoDropDown>

      </WaNoGroup>


      <WaNoGroup name="device">

        <WaNoMultipleOf name="layers">
          <Element id="0">

              <WaNoDictBox name="dimensions">
                <WaNoFloat name="Lx">10</WaNoFloat>
                <WaNoFloat name="Ly">20</WaNoFloat>
                <WaNoFloat name="Lz">20</WaNoFloat>
              </WaNoDictBox>  

              <WaNoDictBox visibility_condition="'%s' == 'file'" visibility_var_path="TABS.general.morphology_type" name="layer_center">
                <WaNoFloat name="Lx">0</WaNoFloat>
                <WaNoFloat name="Ly">0</WaNoFloat>
                <WaNoFloat name="Lz">0</WaNoFloat>
              </WaNoDictBox>  


              <WaNoDropDown visibility_condition="'%s' == 'layer_defined'" visibility_var_path="TABS.general.morphology_type" name="morphology_source">
                 <Entry id="0" chosen="True">file</Entry>
                 <Entry id="1">cubic</Entry>
                 <Entry id="2">stochastic extension</Entry>
              </WaNoDropDown>
              <WaNoFile visibility_condition="'%s' != 'cubic'" visibility_var_path="TABS.device.layers.{{ path[3] }}.morphology_source" logical_filename="COM_{{ path[3] }}.dat" name="morphology_file">Put file here</WaNoFile>
              <WaNoFloat visibility_condition="'%s' == 'cubic'" visibility_var_path="TABS.device.layers.{{ path[3] }}.morphology_source" logical_filename="COM_{{ path[3] }}.dat" name="lattice_constant">1.0</WaNoFloat>


              <WaNoDropDown name="onsite_energy_source">
                 <Entry id="0">file</Entry>
                 <Entry id="1">Gaussian</Entry>
              </WaNoDropDown>
              <WaNoFile visibility_condition="'%s' == 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" logical_filename="onsite_energy_{{ path[3] }}.dat" name="energy_file">Put file here</WaNoFile>

              <WaNoDropDown name="reorganization_energies_source">
                 <Entry id="0" chosen="True">constant</Entry>
                 <Entry id="1">file</Entry>
                 <Entry id="2">Gaussian</Entry>
              </WaNoDropDown>
              <WaNoFile visibility_condition="'%s' == 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" logical_filename="lambdas_{{ path[3] }}.dat" name="reorganization_energy_file">Put file here</WaNoFile>

              <WaNoMultipleOf name="molecule_species">
                <Element id="0">
                  <WaNoInt name="species_id">0</WaNoInt>
                  <WaNoFloat name="concentration">1.0</WaNoFloat>
            
                  <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.holes" name="ionization_potential">
                    <WaNoFloat visibility_condition="'%s' != 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" name="mean">-5.2</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' != 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" name="disorder">0.1</WaNoFloat>
                    
                    <WaNoFloat visibility_condition="'%s' == 'Gaussian'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="mean_lambda">-5.2</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' == 'Gaussian'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="disorder_lambda">0.1</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' == 'constant'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="lambda_value">0.2</WaNoFloat>
                  </WaNoDictBox>
            
                  <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.electrons" name="electron_affinity">
                    <WaNoFloat visibility_condition="'%s' != 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" name="mean">-5.2</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' != 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" name="disorder">0.1</WaNoFloat>
                    
                    <WaNoFloat visibility_condition="'%s' == 'Gaussian'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="mean_lambda">-5.2</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' == 'Gaussian'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="disorder_lambda">0.1</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' == 'constant'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="lambda_value">0.2</WaNoFloat>
                  </WaNoDictBox>  
                  
                  <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.excitons" name="excitation_energies">
                    <WaNoFloat visibility_condition="'%s' != 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" name="mean">1.2</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' != 'file'" visibility_var_path="TABS.device.layers.{{ path[3] }}.onsite_energy_source" name="disorder">0.1</WaNoFloat>
                    
                    <WaNoFloat visibility_condition="'%s' == 'Gaussian'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="mean_lambda">-5.2</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' == 'Gaussian'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="disorder_lambda">0.1</WaNoFloat>
                    <WaNoFloat visibility_condition="'%s' == 'constant'" visibility_var_path="TABS.device.layers.{{ path[3] }}.reorganization_energies_source" name="lambda_value">0.2</WaNoFloat>
                  </WaNoDictBox>

                </Element>
              </WaNoMultipleOf>

          </Element>
        </WaNoMultipleOf>


        <WaNoMultipleOf visibility_condition="%s == True" visibility_var_path="TABS.general.connect_electrodes" name="electrodes">
          <Element id="0">

            <WaNoDictBox visibility_condition="'%s' == 'manual'" visibility_var_path="TABS.general.device_layout" name="electrode_norm_vector">
              <WaNoFloat name="x">-0.5</WaNoFloat>
              <WaNoFloat name="y">0.0</WaNoFloat>
              <WaNoFloat name="z">0.0</WaNoFloat>  
            </WaNoDictBox>  

            <WaNoDictBox visibility_condition="'%s' == 'manual'" visibility_var_path="TABS.general.device_layout" name="electrode_dimensions">
              <WaNoFloat name="Ly">20.0</WaNoFloat>
              <WaNoFloat name="Lz">20.0</WaNoFloat>
            </WaNoDictBox>  

            <WaNoDictBox visibility_condition="'%s' == 'manual'" visibility_var_path="TABS.general.device_layout" name="electrode_centers">
              <WaNoFloat name="x">10.5</WaNoFloat>
              <WaNoFloat name="y">0.0</WaNoFloat>
              <WaNoFloat name="z">0.0</WaNoFloat>  
            </WaNoDictBox>  

            <WaNoFloat name="electrode_workfunction">-4.5</WaNoFloat>

            <WaNoDropDown name="coupling_model">
              <Entry id="0">parametrized</Entry>
              <Entry id="1">QM_fit</Entry>
            </WaNoDropDown>

            <WaNoFloat visibility_condition="'%s' == 'parametrized'" visibility_var_path="TABS.device.electrodes.{{ path[3] }}.coupling_model" logical_filename="J_electrode_{{ path[3] }}.dat" name="electrode_wf_decay_length">0.3</WaNoFloat>
            <WaNoFloat visibility_condition="'%s' == 'parametrized'" visibility_var_path="TABS.device.electrodes.{{ path[3] }}.coupling_model" logical_filename="J_electrode_{{ path[3] }}.dat" name="electrode_coupling">0.001</WaNoFloat>
            <WaNoFile visibility_condition="'%s' == 'QM_fit'" visibility_var_path="TABS.device.electrodes.{{ path[3] }}.coupling_model" logical_filename="J_electrode_{{ path[3] }}.dat" name="electrode_coupling_file">Put file here</WaNoFile>

          </Element>
        </WaNoMultipleOf>
      </WaNoGroup>  




      <WaNoGroup name="topology">

        <WaNoInt name="max neighbours">45</WaNoInt>

        <WaNoDropDown name="transfer_integral_source">
          <Entry id="0">file</Entry>
          <Entry id="1">QM_expansion</Entry>
          <Entry id="2">Miller-Abrahams</Entry>
        </WaNoDropDown>
        <WaNoFile visibility_condition="'%s' == 'file'" visibility_var_path="TABS.topology.transfer_integral_source" logical_filename="J_all.dat" name="transfer_integral_file">Put file here</WaNoFile>

        <WaNoMultipleOf name="pair parameters">
          <Element id="0">
          
            <WaNoInt name="molecule_type_id1">0</WaNoInt>
            <WaNoInt name="molecule_type_id2">0</WaNoInt>

            <WaNoDictBox visibility_condition="'%s' == 'advanced'" visibility_var_path="TABS.general.settings" name="pair_cutoff">
              <WaNoFloat name="mean_distance">2.5</WaNoFloat>
              <WaNoFloat name="smearing">0.3</WaNoFloat>
            </WaNoDictBox> 

            <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.holes" name="hole_transfer_integrals">
              <WaNoFloat visibility_condition="'%s' == 'Miller-Abrahams'" visibility_var_path="TABS.topology.transfer_integral_source" name="wf_decay_length">0.1</WaNoFloat>
              <WaNoFloat visibility_condition="'%s' == 'Miller-Abrahams'" visibility_var_path="TABS.topology.transfer_integral_source" name="maximum_ti">0.003</WaNoFloat>
              <WaNoFile visibility_condition="'%s' == 'QM_expansion'" visibility_var_path="TABS.topology.transfer_integral_source" logical_filename="J_holes_{{ path[3] }}.dat" name="ti_input_file">Put file here</WaNoFile>
              <WaNoFile visibility_condition="'%s' == 'file'" visibility_var_path="TABS.topology.transfer_integral_source" logical_filename="J_holes_{{ path[3] }}.dat" name="ti_file">Put file here</WaNoFile>
            </WaNoDictBox>

            <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.electrons" name="electron_transfer_integrals">
              <WaNoFloat visibility_condition="'%s' == 'Miller-Abrahams'" visibility_var_path="TABS.topology.transfer_integral_source" name="wf_decay_length">0.1</WaNoFloat>
              <WaNoFloat visibility_condition="'%s' == 'Miller-Abrahams'" visibility_var_path="TABS.topology.transfer_integral_source" name="maximum_ti">0.003</WaNoFloat>
              <WaNoFile visibility_condition="'%s' == 'QM_expansion'" visibility_var_path="TABS.topology.transfer_integral_source" logical_filename="J_electrons_{{ path[3] }}.dat" name="ti_input_file">Put file here</WaNoFile>
              <WaNoFile visibility_condition="'%s' == 'file'" visibility_var_path="TABS.topology.transfer_integral_source" logical_filename="J_electrons_{{ path[3] }}.dat" name="ti_file">Put file here</WaNoFile>
            </WaNoDictBox>

            <WaNoDictBox visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.excitons" name="excitons">
              <WaNoDictBox visibility_condition="'%s' != 'heuristic'" visibility_var_path="TABS.physics.exciton_settings.transport_rates" name="dexter_transfer_integrals">
                <WaNoFloat visibility_condition="'%s' == 'Miller-Abrahams'" visibility_var_path="TABS.topology.transfer_integral_source" name="wf_decay_length">0.1</WaNoFloat>
                <WaNoFloat visibility_condition="'%s' == 'Miller-Abrahams'" visibility_var_path="TABS.topology.transfer_integral_source" name="maximum_ti">0.003</WaNoFloat>
                <WaNoFile visibility_condition="'%s' != 'heuristic'" visibility_var_path="TABS.physics.exciton_settings.transport_rates" logical_filename="Dexter1_{{ path[3] }}.dat" name="ti_input_file">Put file here</WaNoFile>
              </WaNoDictBox>
                <WaNoString name="Foerster_radius_forwards">2.5</WaNoString>
                <WaNoString name="Foerster_radius_backwards">0.5</WaNoString>
            </WaNoDictBox>
        

          </Element>
        </WaNoMultipleOf>
      </WaNoGroup>







      <WaNoGroup name="operation">
        <WaNoMultipleOf name="experiments">
          <Element id="0">
            <WaNoInt name="simulations">1</WaNoInt>
            <WaNoDropDown name="measurement">
              <Entry id="0">DC</Entry>
            </WaNoDropDown>

            <WaNoMultipleOf name="Temperature">
              <Element id="0">
                <WaNoFloat name="Temperature">300</WaNoFloat>
              </Element>
            </WaNoMultipleOf> 

            <WaNoMultipleOf name="field_strength">
              <Element id="0">
                <WaNoFloat name="field_strength">0.01</WaNoFloat>
              </Element>
            </WaNoMultipleOf>

            <WaNoMultipleOf name="field_direction">
              <Element id="0">
                <WaNoFloat name="x">1</WaNoFloat>
                <WaNoFloat name="y">0</WaNoFloat>
                <WaNoFloat name="z">0</WaNoFloat>  
              </Element>
            </WaNoMultipleOf> 

            <WaNoMultipleOf name="initial_charges">
              <Element id="0">
                <WaNoInt visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.holes" name="holes">0</WaNoInt>
                <WaNoInt visibility_condition="%s == True" visibility_var_path="TABS.physics.particle_types.electrons" name="electrons">0</WaNoInt>
              </Element>
            </WaNoMultipleOf> 

          </Element>
        </WaNoMultipleOf>
      </WaNoGroup>



      <WaNoGroup name="computational">
        <WaNoFloat name="IV fluctuation">0.2</WaNoFloat>
        <WaNoInt name="max_iterations">10000000</WaNoInt>
        <WaNoBool name="parallel">False</WaNoBool>
        <WaNoBool visibility_condition="'%s' == 'advanced'" visibility_var_path="TABS.general.settings" name="use_scratch">True</WaNoBool>
        <WaNoBool visibility_condition="'%s' == 'advanced'" visibility_var_path="TABS.general.settings" name="do_analysis">True</WaNoBool>
      </WaNoGroup>



  </WaNoTabs>
 </WaNoRoot>


 <WaNoExecCommand>bash ./start_LF.sh</WaNoExecCommand>

 <WaNoInputFiles>
   <WaNoInputFile logical_filename="settings">settings</WaNoInputFile>
   <WaNoInputFile logical_filename="start_LF.sh">start_LF.sh</WaNoInputFile>
 </WaNoInputFiles>
 <WaNoOutputFiles>
    <WaNoOutputFile>DriftDiffusion-in.yml</WaNoOutputFile>
 </WaNoOutputFiles>
</WaNoTemplate>
